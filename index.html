<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>è”šæ¥å¯æœŸ</title>
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#000000">
    
    <style>
        html, body {
            margin: 0;
            padding: 0;
            height: 100%;
            width: 100%;
            overflow: hidden;
            position: fixed;
            background: #000; /* é»‘è‰²èƒŒæ™¯ */
        }
        
        #image-container {
            width: 100%;
            height: 100%;
            position: relative;
        }
        
        #image {
            width: 100%;
            height: 100%;
            object-fit: contain;
            display: none; /* åˆå§‹éšè— */
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        
        #image.visible {
            display: block;
            opacity: 1;
        }
        
        /* åŠ è½½åŠ¨ç”» */
        #loading {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-family: Arial, sans-serif;
            text-align: center;
            z-index: 100;
        }
        
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
            margin: 0 auto 10px;
        }
        
        @keyframes spin {
            to { transform: translate(-50%, -50%) rotate(360deg); }
        }
        
        /* ç§»åŠ¨ç«¯ä¼˜åŒ– */
        @media (max-width: 768px) {
            body {
                height: 100vh;
                min-height: -webkit-fill-available;
            }
            
            html {
                height: -webkit-fill-available;
            }
        }
    </style>
</head>
<body>
    <div id="loading">
        <div class="spinner"></div>
        <div>æ–°å¹´buffæ´¾é€ä¸­</div>
    </div>
    
    <div id="image-container">
        <img id="image" crossorigin="anonymous">
    </div>
    
    <script>
        // å›¾ç‰‡åˆ—è¡¨
        const images = [
            "é©¬å¹´çª—è´´-02.jpg", 
            "é©¬å¹´çª—è´´-03.jpg",
            "é©¬å¹´çª—è´´-04.jpg",
            "é©¬å¹´çª—è´´-05.jpg",
            "é©¬å¹´çª—è´´-06.jpg",
            "é©¬å¹´çª—è´´-07.jpg",
            "é©¬å¹´çª—è´´-08.jpg",
            "é©¬å¹´çª—è´´-09.jpg",
            "é©¬å¹´çª—è´´-10.jpg",
            "é©¬å¹´çª—è´´-11.jpg"
        ];
        
        // å›¾ç‰‡é¢„åŠ è½½æ•°ç»„
        let loadedImages = [];
        
        // åŠ è½½å•å¼ å›¾ç‰‡ï¼ˆå¼ºåˆ¶å®Œå…¨åŠ è½½ï¼‰
        function loadImage(src) {
            return new Promise((resolve, reject) => {
                const img = new Image();
                img.crossOrigin = "anonymous"; // å…è®¸è·¨åŸŸ
                
                img.onload = function() {
                    console.log(`âœ… å›¾ç‰‡åŠ è½½å®Œæˆ: ${src}`);
                    
                    // ç¡®ä¿å›¾ç‰‡å®Œå…¨è§£ç 
                    if (this.complete && this.naturalWidth > 0) {
                        resolve(img);
                    } else {
                        reject(new Error('å›¾ç‰‡æœªå®Œå…¨åŠ è½½'));
                    }
                };
                
                img.onerror = function() {
                    console.error(`âŒ å›¾ç‰‡åŠ è½½å¤±è´¥: ${src}`);
                    reject(new Error('å›¾ç‰‡åŠ è½½å¤±è´¥'));
                };
                
                // æ·»åŠ æ—¶é—´æˆ³é˜²æ­¢ç¼“å­˜
                img.src = 'images/' + src + '?t=' + Date.now();
                
                // å¦‚æœå›¾ç‰‡å·²ç»ç¼“å­˜ï¼Œæ£€æŸ¥æ˜¯å¦å·²åŠ è½½å®Œæˆ
                if (img.complete && img.naturalWidth > 0) {
                    resolve(img);
                }
            });
        }
        
        // æ˜¾ç¤ºåŠ è½½å®Œæˆçš„å›¾ç‰‡
        function showImage(img) {
            const imageElement = document.getElementById('image');
            const loadingElement = document.getElementById('loading');
            
            imageElement.src = img.src;
            
            // å›¾ç‰‡æ˜¾ç¤ºåŠ¨ç”»
            setTimeout(() => {
                imageElement.classList.add('visible');
                loadingElement.style.display = 'none';
            }, 100);
        }
        
        // éšæœºé€‰æ‹©å¹¶æ˜¾ç¤ºå›¾ç‰‡
        async function showRandomImage() {
            try {
                const loadingElement = document.getElementById('loading');
                loadingElement.style.display = 'block';
                
                // éšæœºé€‰æ‹©ä¸€å¼ å›¾ç‰‡
                const randomIndex = Math.floor(Math.random() * images.length);
                const imageName = images[randomIndex];
                
                console.log(`ğŸ² éšæœºé€‰æ‹©å›¾ç‰‡: ${imageName}`);
                
                // åŠ è½½å›¾ç‰‡
                const img = await loadImage(imageName);
                
                // æ˜¾ç¤ºå›¾ç‰‡
                showImage(img);
                
            } catch (error) {
                console.error('æ˜¾ç¤ºå›¾ç‰‡å¤±è´¥:', error);
                document.getElementById('loading').innerHTML = 
                    '<div style="color:white">å›¾ç‰‡åŠ è½½å¤±è´¥<br>è¯·æ£€æŸ¥ç½‘ç»œ</div>';
            }
        }
        
        // åˆå§‹åŒ–
        async function init() {
            console.log('ğŸš€ é¡µé¢åˆå§‹åŒ–...');
            
            // éšè—URLå¤„ç†
            window.addEventListener('scroll', function() {
                window.scrollTo(0, 0);
            });
            
            document.addEventListener('touchmove', function(e) {
                e.preventDefault();
            }, { passive: false });
            
            document.addEventListener('gesturestart', function(e) {
                e.preventDefault();
            });
            
            // å¾®ä¿¡å¤„ç†
            if (/MicroMessenger/i.test(navigator.userAgent)) {
                document.addEventListener('WeixinJSBridgeReady', function() {
                    WeixinJSBridge.call('hideToolbar');
                });
            }
            
            // iOSä¼˜åŒ–
            if (/iPad|iPhone|iPod/.test(navigator.userAgent)) {
                document.body.style.height = window.innerHeight + 'px';
            }
            
            // æ˜¾ç¤ºéšæœºå›¾ç‰‡
            await showRandomImage();
            
            console.log('âœ… é¡µé¢åˆå§‹åŒ–å®Œæˆ');
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œ
        window.addEventListener('load', init);
        
    </script>
</body>
</html>

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>蔚来可期</title>
    
    <!-- 隐藏URL的关键meta标签 -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#000000">
    
    <style>
        /* 完全隐藏所有滚动条和地址栏 */
        html, body {
            margin: 0;
            padding: 0;
            height: 100%;
            width: 100%;
            overflow: hidden; /* 关键：隐藏滚动条 */
            position: fixed;  /* 防止移动端地址栏显示 */
        }
        
        img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            display: block;
        }
        
        /* 移动端全屏优化 */
        @media (max-width: 768px) {
            body {
                height: 100vh;
                min-height: -webkit-fill-available;
            }
            
            html {
                height: -webkit-fill-available;
            }
        }
    </style>
</head>
<body>
    <img id="image">
    
    <script>
// 优化：添加图片缓存
const imageCache = new Map();

// 优化：使用懒加载
function lazyLoadImage(index) {
    const imgSrc = images[index];
    const cacheKey = 'images/' + imgSrc;
    
    // 检查缓存
    if (imageCache.has(cacheKey)) {
        return Promise.resolve(imageCache.get(cacheKey));
    }
    
    return new Promise((resolve, reject) => {
        const img = new Image();
        img.onload = () => {
            imageCache.set(cacheKey, img);
            resolve(img);
        };
        img.onerror = reject;
        img.src = cacheKey + '?v=' + Date.now(); // 防止缓存
    });
}

// 优化：逐步预加载（不阻塞页面）
async function progressivePreload() {
    // 立即加载第一张
    try {
        const firstImg = await lazyLoadImage(0);
        showImage(0);
    } catch (error) {
        console.error('加载第一张图片失败:', error);
    }
    
    // 后台加载其余图片
    for (let i = 1; i < images.length; i++) {
        lazyLoadImage(i).catch(() => {
            console.warn(`图片 ${images[i]} 加载失败`);
        });
        
        // 每加载一张等待一下，避免同时请求太多
        if (i % 3 === 0) {
            await new Promise(resolve => setTimeout(resolve, 100));
        }
    }
}

// 在页面加载时调用
window.addEventListener('DOMContentLoaded', progressivePreload);

        // 图片列表
        const images = [
            "02.jpg", 
            "03.jpg",
            "04.jpg",
            "05.jpg",
            "06.jpg",
            "08.jpg",
            "09.jpg",
            "10.jpg",
            "11.jpg"
        ];
        
        // 随机显示一张图片
        if (images.length > 0) {
            const randomIndex = Math.floor(Math.random() * images.length);
            document.getElementById('image').src = 'images/' + images[randomIndex];
        }
        
        // ================= 隐藏URL的核心代码 =================
        
        // 1. 禁止页面滚动，防止地址栏出现
        window.addEventListener('scroll', function() {
            window.scrollTo(0, 0);
        });
        
        // 2. 禁止下拉刷新（移动端）
        document.addEventListener('touchmove', function(e) {
            e.preventDefault();
        }, { passive: false });
        
        // 3. 阻止双指缩放
        document.addEventListener('gesturestart', function(e) {
            e.preventDefault();
        });
        
        // 4. 微信浏览器特殊处理
        if (/MicroMessenger/i.test(navigator.userAgent)) {
            // 微信中禁用一些默认行为
            document.addEventListener('WeixinJSBridgeReady', function() {
                // 隐藏微信底部工具栏
                WeixinJSBridge.call('hideToolbar');
            });
        }
        
        // 5. 移除点击图片切换功能（只保留加载时随机显示一张）
        // 注释掉原来的点击切换代码
        // document.getElementById('image').onclick = function() {
        //     if (images.length > 0) {
        //         const randomIndex = Math.floor(Math.random() * images.length);
        //         this.src = 'images/' + images[randomIndex] + '?t=' + Date.now();
        //     }
        // };
        
        // 6. 键盘空格键支持切换（移除或保留根据需求）
        document.onkeydown = function(e) {
            if (e.code === 'Space') {
                e.preventDefault();
                // 取消空格键切换功能
                // document.getElementById('image').click();
            }
        };
        
        // 7. 页面加载完成后的额外处理
        window.onload = function() {
            // 确保页面在顶部
            window.scrollTo(0, 0);
            
            // 如果是iOS设备，添加全屏优化
            if (/iPad|iPhone|iPod/.test(navigator.userAgent)) {
                document.body.style.height = window.innerHeight + 'px';
            }
        };
        
        
    </script>
</body>
</html>
